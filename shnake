#!/bin/sh

PRG="shnake"
HEAD_COLOR="\033[42m"
BODY_COLOR="\033[102m\033[36m"
FRUIT_COLOR="\033[31m"
RESET_COLOR="\033[0;0m"
HEAD="$HEAD_COLOR  $RESET_COLOR"
BODY="${BODY_COLOR}XX$RESET_COLOR"
FRUIT="${FRUIT_COLOR}▝▘$RESET_COLOR"
CLEAR="  "
OFFSET_X=1
OFFSET_Y=2
SCALE_X=2

die(){
    show_cursor
    printf "$PRG: \033[1;31merror:\033[0m \033[1;37m%s$RESET_COLOR\n" "$*" >&2 # print to stderr
    exit 1
}

move_cursor(){
    if [ "$#" -ne 2 ]; then
        die "Incorrect number of args passed to move_cursor"
    fi
    printf "\033[%d;%dH" "$2" "$1"
}

show_cursor(){
    printf "\033[?25h"
}

hide_cursor(){
    printf "\033[?25l"
}

print_block(){
    if [ "$#" -ne 3 ]; then
        die "Incorrect number of args passed to print_block"
    fi
    move_cursor "$(($1 * SCALE_X + OFFSET_X))" "$(($2 + OFFSET_Y))"
    printf "$3"
}

main(){
    hide_cursor
    show_cursor
}

main
